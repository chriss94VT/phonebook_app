{"version":3,"sources":["Components/Notification.js","Services/login_service.js","Components/LoginForm.js","Services/entry_service.js","Components/PhonebookApp.js","index.js"],"names":["Notification","message","style","color","login","credentials","a","axios","post","response","data","checkStatus","token","get","LoginForm","props","useState","username","setUsername","password","setPassword","setMessage","display","setDisplay","postLogin","event","preventDefault","LoginService","user","localStorage","setItem","window","location","reload","console","error","onChange","target","value","type","onClick","baseURL","authStr","getItem","getAll","headers","Authorization","create","newPerson","update","id","updatedPerson","put","remove","delete","PhonebookApp","persons","setPersons","newName","setNewName","newNumber","setNewNumber","newFilter","setNewFilter","auth","setAuth","useEffect","loginService","getPersons","phoneService","entries","personList","map","person","name","toLowerCase","trim","includes","key","number","removeUser","handleAddPerson","personObj","forEach","match","answer","confirm","allUsers","newUser","concat","setTimeout","onSubmit","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a4ef3c82.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Notification = ({ message }) => {\n\n    const style = {\n        color: 'black',\n    }\n\n  return (\n    <>\n      <p style={style}>{message}</p>\n    </>\n  );\n};\n\nexport default Notification;\n","import axios from \"axios\";\nconst baseUrl = '/api/auth';\n\nconst login = async credentials => {\n  const response = await axios.post(baseUrl, credentials);\n  return response.data;\n};\n\nconst checkStatus = async token => {\n  const response = await axios.get(`${baseUrl}/checkStatus?token=${token}`);\n  return response.data;\n}\n\nexport default {\n  login,\n  checkStatus\n};\n","import React, { useState, useEffect } from \"react\";\nimport LoginService from \"../Services/login_service\";\nimport Notification from \"./Notification\";\n\nconst LoginForm = props => {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n const [message, setMessage] = useState(\"\");\n  const [display, setDisplay] = useState(false);\n\n  const handleUsernameChange = event => {\n    setUsername(event.target.value);\n  };\n\n  const handlePasswordChange = event => {\n    setPassword(event.target.value);\n  };\n\n  const postLogin = async event => {\n    event.preventDefault();\n\n    const credentials = {\n      username,\n      password\n    };\n\n    try {\n      const user = await LoginService.login(credentials);\n      localStorage.setItem(\"token\", user.token);\n      setUsername(\"\");\n      setPassword(\"\");\n      setMessage(\"Log in Successful\");\n      window.location.reload();\n    } catch (error) {\n      setMessage(\"Failed to Log In\");\n      console.error(error);\n    }\n  };\n\n  const setDisplayTrue = event => {\n    setDisplay(true);\n  };\n\n  const setDisplayFalse = event => {\n    setDisplay(false);\n  }\n\n  return (\n    <>\n      {display ? (\n        <div>\n          <h2>Login</h2>\n          <Notification message={message} />\n          <form>\n            username:{\" \"}\n            <input\n              onChange={handleUsernameChange}\n              value={username}\n              type=\"text\"\n            ></input>\n            <br />\n            password:{\" \"}\n            <input\n              onChange={handlePasswordChange}\n              value={password}\n              type=\"password\"\n            ></input>\n            <br />\n            <input onClick={postLogin} value=\"Login\" type=\"submit\"></input>\n          </form>\n        </div>\n      ) : null}\n      <div>\n        <button onClick={setDisplayTrue}>Show Log In</button>\n        <button onClick={setDisplayFalse}>Cancel</button>\n      </div>\n    </>\n  );\n};\n\nexport default LoginForm;\n","import axios from \"axios\";\n\nconst baseURL = \"/api/persons\";\nconst authStr = `Bearer ${localStorage.getItem(\"token\")}`;\n\nconst getAll = async () => {\n  const response = await axios.get(baseURL, {\n    headers: { Authorization: authStr }\n  });\n  return response.data;\n};\n\nconst create = async newPerson => {\n  const response = await axios.post(baseURL, newPerson, {\n    headers: { Authorization: authStr }\n  });\n  return response.data;\n};\n\nconst update = async (id, updatedPerson) => {\n  const response = await axios.put(`${baseURL}/${id}`, updatedPerson, {\n    headers: { Authorization: authStr }\n  });\n  return response.data;\n};\n\nconst remove = async id => {\n  const response = await axios.delete(`${baseURL}/${id}`, {\n    headers: { Authorization: authStr }\n  });\n  return response.data;\n};\n\nexport default {\n  getAll,\n  create,\n  remove,\n  update\n};\n","import React, { useState, useEffect } from \"react\";\nimport Notification from \"./Notification\";\nimport LoginForm from \"../Components/LoginForm\";\nimport Togglable from \"../Components/Togglable\";\nimport phoneService from \"../Services/entry_service\";\nimport loginService from \"../Services/login_service\";\n\nconst PhonebookApp = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [newFilter, setNewFilter] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [auth, setAuth] = useState(false);\n\n  useEffect(async () => {\n    try {\n      const response = await loginService.checkStatus(\n        window.localStorage.getItem(\"token\")\n      );\n      setAuth(response);\n    } catch (error) {\n      console.error(error);\n    }\n  }, []);\n\n  const getPersons = async () => {\n    try {\n      const entries = await phoneService.getAll();\n      setPersons(entries);\n    } catch (error) {\n      console.error(error.message);\n    }\n  };\n\n  useEffect(getPersons, []);\n\n  const personList = persons.map(person => {\n    if (\n      person.name\n        .toLowerCase()\n        .trim()\n        .includes(newFilter.toLowerCase().trim())\n    ) {\n      return (\n        <div key={person.name}>\n          <p>\n            {person.name} {person.number}\n          </p>\n          <button onClick={() => removeUser(person)}>delete</button>\n        </div>\n      );\n    }\n  });\n\n  const handleAddPerson = async event => {\n    event.preventDefault();\n    let match;\n    let answer;\n\n    const personObj = {\n      name: newName,\n      number: newNumber\n    };\n\n    persons.forEach(async person => {\n      if (person.name.toLowerCase().trim() === newName.toLowerCase().trim()) {\n        match = true;\n        answer = window.confirm(\n          `${newName} has already been added to the phonebook, would you like to replace the number?`\n        );\n        try {\n          if (answer) {\n            await phoneService.update(person.id, personObj);\n            const allUsers = await phoneService.getAll();\n            setPersons(allUsers);\n            setNewName(\"\");\n            setNewNumber(\"\");\n          }\n        } catch (error) {\n          console.error(error.message);\n        }\n      }\n    });\n\n    if (!match) {\n      try {\n        const newUser = await phoneService.create(personObj);\n        setPersons(persons.concat(newUser));\n        setNewName(\"\");\n        setNewNumber(\"\");\n        setMessage(`Added ${newName}`);\n        setTimeout(() => {\n          setMessage(null);\n        }, 5000);\n      } catch (error) {\n        console.error(error.message);\n      }\n    }\n  };\n\n  const handlePersonChange = event => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = event => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleFilterChange = event => {\n    setNewFilter(event.target.value);\n  };\n\n  const removeUser = async person => {\n    try {\n      await phoneService.remove(person.id);\n      const allUsers = await phoneService.getAll();\n      setPersons(allUsers);\n    } catch (error) {\n      setMessage(\n        `Information for ${person.name} has already been removed from the server.`\n      );\n      setTimeout(() => {\n        setMessage(null);\n      }, 5000);\n    }\n  };\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      {!auth ? <LoginForm /> : null}\n      <div>\n        {auth ? (\n          <div>\n            <h2>Phonebook</h2>\n            <Notification message={message} />\n            <div>\n              filter shown with{\" \"}\n              <input onChange={handleFilterChange} value={newFilter} />\n            </div>\n            <div>\n              <h2>Add New Number</h2>\n              <form onSubmit={handleAddPerson}>\n                <div>\n                  name: <input onChange={handlePersonChange} value={newName} />\n                </div>\n                <div>\n                  number:{\" \"}\n                  <input onChange={handleNumberChange} value={newNumber} />\n                </div>\n                <div>\n                  <button type=\"submit\">add</button>\n                </div>\n              </form>\n            </div>\n            <h2>Numbers</h2>\n            <div>{personList}</div>\n          </div>\n        ) : null}\n      </div>\n    </div>\n  );\n};\n\nexport default PhonebookApp;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport PhonebookApp from './Components/PhonebookApp';\n//import * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<PhonebookApp />, document.getElementById('root'));;"],"sourceRoot":""}